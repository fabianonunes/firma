package tc.fab.pdf.signer;

import static org.junit.Assert.fail;

import java.awt.Dimension;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.security.cert.Certificate;
import java.security.cert.CertificateFactory;

import javax.imageio.ImageIO;

import org.apache.commons.codec.binary.Hex;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import tc.fab.pdf.signer.options.AppearanceOptions;

public class SignaturePreviewTest {

	SignaturePreview preview;
	private Certificate cert;

	@Before
	public void setUp() throws Exception {

		byte[] data = Hex.decodeHex(CERTIFICATE_CHAIN.toCharArray());

		cert = CertificateFactory.getInstance("X.509").generateCertificate(
			new ByteArrayInputStream(data));

		preview = new SignaturePreview(cert, new Dimension(400, 100));

		BufferedImage img = preview.getImagePreview(new AppearanceOptions());

		ImageIO.write(img, "PNG", new File("/tmp/ram/signature.png"));
	}

	@After
	public void tearDown() throws Exception {
	}

	@Test
	public void test() {
		fail("Not yet implemented");
	}

	private static String CERTIFICATE_CHAIN = "308203d9308202c1a003020102020900810f685ddb34e5f3300d06092a864886f70d0101050500308182310b30090603550406130242523119301706035504080c10446973747269746f204665646572616c3111300f06035504070c0842726173696c6961310f300d060355040a0c066661622e74633113301106035504030c0a6563322e6661622e7463311f301d06092a864886f70d010901161066616269616e6f406e756e65732e6d65301e170d3132303532303230353331355a170d3132303631393230353331355a308182310b30090603550406130242523119301706035504080c10446973747269746f204665646572616c3111300f06035504070c0842726173696c6961310f300d060355040a0c066661622e74633113301106035504030c0a6563322e6661622e7463311f301d06092a864886f70d010901161066616269616e6f406e756e65732e6d6530820122300d06092a864886f70d01010105000382010f003082010a0282010100c581916d374c7a34243381c001c1d2f2d95e9af02f0ebba8b2c277426e2b54941f90828fd42f8366ffd5d79a6002e99cdbd8cd41e2dfa402e0d06162afe49dd2506a1fcba6c28be8b8dba8bdafe0dc078e81522bd90072d7b659bbfae1ceae378da8ec7a4442026ee2b04f12e8ccfe8465e1d6cbf55aa229578cb8a4637bbe8d40421069cf9bfab4a3c5a3cc7ea60fc0558c99ba80c99ec079f52a216c8389389755ecf2922c95bf8dc27d65bccf10b32aed0c49e6ebf4bc6c8536e6b69c228739bfa1b29e265b4bb020a211ebfe041efc0afe1e4418dd9939eb023cfee3deea69c2fe3912bf2db5021692e060c3aedc5a5e750939fb6d17b0f25132965445450203010001a350304e301d0603551d0e041604142832c25c34afedc3345962d0d74a7e49de4c2311301f0603551d230418301680142832c25c34afedc3345962d0d74a7e49de4c2311300c0603551d13040530030101ff300d06092a864886f70d01010505000382010100676f5bd7866608358818693e98c31f259040e683d2ad12a65ad171dd6cb31ed92aff4e72ab2174cce7dd331bd74b2acabc152e120de5776f8ebfcdf08af4d985bc5503f3b4e5f9e8776135f62929224a08be3cf7dee897a6982f7075e83ea603cb3a4c0d1c5bfcdd76a9dde0ebfe91de150efd594e4a80fa6fa1ff8191c31b02e5d8b3b3166c042eb37a64e7189c9856d2bb519686ce1c808791975abf93568b526a3af0696003d1251369acf6e9b0e9cccbe1bb062dc4dcc129864e15628283cea3079ce9686fec2fa4056e880270379d87c13f40890287364fdb2aa82b8d307ac2c015e16b6d520d2ea5edf12986f65de9026e08bd0490d91ec25b1fbb6d9a";

}
